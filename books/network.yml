---
- hosts: all
  tasks:
    - include_vars: ../vars/global.yml
    - name: NETWORK configuring interface file dhcpcd.conf
      copy:
        src: "{{ files_repo }}/conf/dhcpcd.conf"
        dest: "/etc/dhcpcd.conf"
        mode: "664"
        owner: "root"
        group: "netdev"

    - name: NETWORK replace variables in dhcpcd.conf
        lineinfile:
          path: /etc/dhcpcd.conf
          regexp: '@IP@'
          line: "{{ piserver_ip }}"
        lineinfile:
          path: /etc/dhcpcd.conf
          regexp: '@NETMASK@'
          line: "{{ piserver_netmask }}"
        lineinfile:
          path: /etc/dhcpcd.conf
          regexp: '@INTERFACE@'
          line: "{{ piserver_interface }}"
        lineinfile:
          path: /etc/dhcpcd.conf
          regexp: '@GATEWAY@'
          line: "{{ piserver_gateway }}"